var data = {
    "staffList": [
        {
            "ORDER_NUM": 7,
            "GROUP_LIST": [
                "22006847",
                "99006840"
            ],
            "STAFF_ID": 19028245,
            "STAFF_NAME": "江苏苏州管理员",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "111111"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 16075592,
            "STAFF_NAME": "小李权限测试用",
            "CITY_LIST": [
                "450"
            ],
            "STAFF_CODE": "141120"
        },
        {
            "ORDER_NUM": 324,
            "GROUP_LIST": [
                "83091441",
                "84091442",
                "87091444",
                "99006840"
            ],
            "STAFF_ID": 340001,
            "STAFF_NAME": "江苏演示员工1",
            "CITY_LIST": [
                "330",
                "340",
                "350",
                "440"
            ],
            "STAFF_CODE": "340001"
        },
        {
            "ORDER_NUM": 5,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 340002,
            "STAFF_NAME": "江苏演示员工2",
            "CITY_LIST": [
                "107",
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "340002"
        },
        {
            "ORDER_NUM": 3,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 48073941,
            "STAFF_NAME": "何宁南京",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "HNANJING"
        },
        {
            "ORDER_NUM": 89,
            "GROUP_LIST": [
                "83091441"
            ],
            "STAFF_ID": 3400000,
            "STAFF_NAME": "吴洲",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "JIANGSU"
        },
        {
            "ORDER_NUM": 1,
            "GROUP_LIST": [],
            "STAFF_ID": 16006844,
            "STAFF_NAME": "张小小",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "JS146843"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 17007739,
            "STAFF_NAME": "WWWWWWWWWW",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "JS157738"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [
                "22006847",
                "26091543",
                "99006840"
            ],
            "STAFF_ID": 26018741,
            "STAFF_NAME": "何宁",
            "CITY_LIST": [
                "330"
            ],
            "STAFF_CODE": "JS238740"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 29003988,
            "STAFF_NAME": "QBSDW",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "JS263987"
        },
        {
            "ORDER_NUM": 2,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 68009640,
            "STAFF_NAME": "王茜",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "JS669639"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 82144243,
            "STAFF_NAME": "程雨",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "JS774242"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [],
            "STAFF_ID": 97028791,
            "STAFF_NAME": "pending",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "JS968790"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 80008287,
            "STAFF_NAME": "测试一001",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "TEST001"
        },
        {
            "ORDER_NUM": 3,
            "GROUP_LIST": [
                "22006847",
                "99006840"
            ],
            "STAFF_ID": 30022991,
            "STAFF_NAME": "王新",
            "CITY_LIST": [
                "340"
            ],
            "STAFF_CODE": "WANGXIN9"
        },
        {
            "ORDER_NUM": 0,
            "GROUP_LIST": [
                "99006840"
            ],
            "STAFF_ID": 32076945,
            "STAFF_NAME": "小青",
            "CITY_LIST": [
                "330",
                "340",
                "343",
                "346",
                "348",
                "349",
                "350",
                "354",
                "358",
                "430",
                "440",
                "445",
                "450"
            ],
            "STAFF_CODE": "XIAOQING"
        }
    ]
}
$(function () {
    //轮播
    $('#myCarousel').carousel({
        interval: 2000
    })

    //
    var finalStaffList = {
        area: null,
        group: null,
        getFinalStaffList: function (data, groupOrArea, param) {
            var retStaffList = [];
            $.each(data, function (i, staff) {
                if (1 == param) {
                    for (var item in staff.CITY_LIST) {
                        if (groupOrArea == staff.CITY_LIST[item]) {
                            retStaffList.push(staff);
                        }
                    }
                } else if (2 == param) {
                    for (var item in staff.GROUP_LIST) {
                        if (groupOrArea == staff.CITY_LIST[item]) {
                            retStaffList.push(staff);
                        }
                    }
                }
            });
            return retStaffList;
        },
        getFinalStaffListWithGroupOrArea: function (data, groupOrArea) {
            var myFinalStaffList = [];
            if (3 == groupOrArea.length) {
                this.area = groupOrArea;
                myFinalStaffList = this.getFinalStaffList(data, this.area, 1);
            } else {
                this.group = groupOrArea;
                myFinalStaffList = this.getFinalStaffList(data, this.group, 2);
            }
            return myFinalStaffList;
        },
        getData: function (tp, pageSize, finalData) {
            var dataSpace = '<div class="data-render"><table class="table table-hover" id="Pui">';
            for (var i = 0; i < pageSize; i++) {
                var dataId = pageSize * (tp - 1) + i;
                if (dataId + 1 > finalData.length) {
                    break;
                } else {
                    //dataSpace += '<thead><tr><th></th></tr></thead>';
                    dataSpace += '<tr>';
                    dataSpace += '<td><input type="hidden" staffcode="' + finalData[dataId].STAFF_CODE + '" value="' +
                        finalData[dataId].STAFF_ID + '" ordernum="' + finalData[dataId].ORDER_NUM + '">';
                    dataSpace += '<p title="' + finalData[dataId].STAFF_NAME + '" class="width48">'
                        + finalData[dataId].STAFF_NAME + '</p></td>';
                    dataSpace += '<td><p>' + finalData[dataId].STAFF_CODE + '</p></td>';
                    dataSpace += '<td><p>' + finalData[dataId].ORDER_NUM + '</p></td>';
                    dataSpace += '</tr>';
                }
            }
            dataSpace += '</table></div>'
            $("#mydiv").html(dataSpace);
        }
    }
    var myData = data.staffList;
    var finalData = finalStaffList.getFinalStaffListWithGroupOrArea(myData, "340");
    $(window).load(function () {
        PAGER.initPager(1, finalData.length, 5, 7, 'pager', 'mydiv', finalData, finalStaffList.getData);
    });
});


(function ($) {
    $.myAlert = function (content) {
        alert(content + " : fuck");
    }
})($)
